# Copyright The Conforma Contributors
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# SPDX-License-Identifier: Apache-2.0

apiVersion: v1
kind: ConfigMap
metadata:
  name: taskrun-config
  namespace: default # Change as needed

data:
  POLICY_CONFIGURATION: "github.com/enterprise-contract/config//slsa3"
  PUBLIC_KEY: "k8s://openshift-pipelines/public-key"
  IGNORE_REKOR: "true"

  # These will be used to lookup the public key for the Chains
  # signing secret in the cluster
  PUBLIC_KEY_SECRET_NS: "openshift-pipelines"
  PUBLIC_KEY_SECRET_NAME: "public-key"
  PUBLIC_KEY_SECRET_KEY: "cosign.pub"

  # If the public key lookup fails then this is the key that will
  # be used as a default
  PUBLIC_KEY: |
    -----BEGIN PUBLIC KEY-----
    MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEZP/0htjhVt2y0ohjgtIIgICOtQtA
    naYJRuLprwIv6FDhZ5yFjYUEtsmoNcW7rx2KM6FOXGsCX3BNc7qhHELT+g==
    -----END PUBLIC KEY-----

  # VSA signing key secret configuration
  VSA_SIGNING_KEY_SECRET_NS: "default"
  VSA_SIGNING_KEY_SECRET_NAME: "vsa-signing-key"
  VSA_SIGNING_KEY_SECRET_KEY: "cosign.key"

  # VSA upload configuration
  VSA_UPLOAD_URL: "rekor@https://rekor.sigstore.dev"

  # Task configuration
  TASK_NAME: "generate-vsa"
